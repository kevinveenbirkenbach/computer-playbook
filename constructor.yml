---
- name:   variable mapping   
  hosts:  all
  vars:
    activate_all_timers:          "{{ activate_all_timers | lower | bool }}"
    nginx_matomo_tracking:        "{{ nginx_matomo_tracking | lower | bool }}"
    execute_updates:              "{{ execute_updates | lower | bool }}"
    force_backup_before_update:   "{{ force_backup_before_update | lower | bool }}"
    enable_central_database:      "{{ enable_central_database | lower | bool }}"

- name: update device
  hosts:  all
  become: true
  tasks:
  roles:
    - role: update
      when: execute_updates

- name: setup standard wireguard
  hosts: wireguard_server
  become: true
  roles:
    - wireguard

# vpn setup
- name: setup wireguard client behind firewall\nat
  hosts: wireguard_behind_firewall
  become: true
  roles:
    - client-wireguard-behind-firewall

- name: setup wireguard client
  hosts: wireguard_client
  become: true
  roles:
    - client-wireguard

## backup setup
- name: setup replica backup hosts
  hosts: replica_backup
  become: true
  roles:
    - role: backup-remote-to-local

- name: setup backup to swappable
  hosts: backup_to_usb
  become: true
  roles:
    - backup-data-to-usb

## driver setup
- name: driver-intel
  hosts: intel
  become: true
  roles:
    - driver-intel

- name: setup multiprinter hosts
  hosts: epson_multiprinter
  become: true
  roles:
    - driver-epson-multiprinter

## system setup 
- name: setup swapfile hosts
  hosts: swapfile
  become: false
  roles:
    - system-swapfile