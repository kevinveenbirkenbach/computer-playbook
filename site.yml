---
- name: setup arch servers
  hosts: arch_servers
  roles:
    - native-security
    - native-pacman
    - native-wireguard
    - native-user-alarm
- name: setup stores of backups
  hosts: backup_stores
  roles:
    - native-pull-remote-backups
- name: setup webservers
  hosts: webservers
  roles:
   -  role: native-homepage
      vars:
        domain: "{{top_domain}}"
   -  role: docker-nextcloud
      vars:
        domain: cloud.{{top_domain}}
        http_port: 8001
   -  role: docker-gitea
      vars:
        domain: git.{{top_domain}}
        http_port: 8002
        ssh_port:  2201
        run_mode: prod
   -  role: docker-wordpress
      vars:
        domain: www.{{top_domain}}
        http_port: 8003
   -  role: docker-mediawiki
      vars:
        domain: wiki.{{top_domain}}
        http_port: 8004
   -  role: docker-mybb
      vars:
        domain: forum.{{top_domain}}
        http_port: 8005
   -  role: docker-yourls
      vars:
        domain: s.{{top_domain}}
        http_port: 8006
   -  role: docker-mailu
      vars:
        domain: "mail.{{top_domain}}"
        http_port: 8007
        https_port:  4431
   - native-docker-volume-backup
